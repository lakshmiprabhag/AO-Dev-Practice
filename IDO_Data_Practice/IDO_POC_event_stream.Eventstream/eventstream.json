{
  "sources": [
    {
      "id": "3734a98a-7996-4311-9686-6a9d4120bcd9",
      "name": "StockMarket",
      "type": "SampleData",
      "properties": {
        "type": "StockMarket"
      }
    }
  ],
  "destinations": [
    {
      "id": "5f189d4e-4416-4c1b-bb7a-b5bacf9d2f0b",
      "name": "Eventhouse",
      "type": "Eventhouse",
      "properties": {
        "dataIngestionMode": "ProcessedIngestion",
        "workspaceId": "7eea2a71-45fd-45f7-a05f-82c1096193fc",
        "itemId": "ff4b72e7-ccf5-474d-9c25-87730f78c5a3",
        "databaseName": "KQLEventhouse",
        "tableName": "StockMarket_stream",
        "inputSerialization": {
          "type": "Json",
          "properties": {
            "encoding": "UTF8"
          }
        }
      },
      "inputNodes": [
        {
          "name": "GroupBy"
        }
      ],
      "inputSchemas": [
        {
          "name": "GroupBy",
          "schema": {
            "columns": [
              {
                "name": "time",
                "type": "DateTime",
                "fields": null,
                "items": null
              },
              {
                "name": "SUM_volume",
                "type": "Float",
                "fields": null,
                "items": null
              },
              {
                "name": "AVG_bidPrice",
                "type": "Float",
                "fields": null,
                "items": null
              },
              {
                "name": "Window_End_Time",
                "type": "DateTime",
                "fields": null,
                "items": null
              }
            ]
          }
        }
      ]
    }
  ],
  "streams": [
    {
      "id": "6add1df0-8ddd-4a49-ae58-ca70346a4bf4",
      "name": "IDO_POC_event_stream-stream",
      "type": "DefaultStream",
      "properties": {},
      "inputNodes": [
        {
          "name": "StockMarket"
        }
      ]
    }
  ],
  "operators": [
    {
      "name": "Filter",
      "type": "Filter",
      "inputNodes": [
        {
          "name": "IDO_POC_event_stream-stream"
        }
      ],
      "properties": {
        "conditions": [
          {
            "column": {
              "expressionType": "ColumnReference",
              "node": null,
              "columnName": "sector",
              "columnPathSegments": []
            },
            "operatorType": "Equals",
            "value": {
              "expressionType": "Literal",
              "dataType": "Nvarchar(max)",
              "value": "softwareservices"
            }
          }
        ]
      },
      "inputSchemas": [
        {
          "name": "IDO_POC_event_stream-stream",
          "schema": {
            "columns": [
              {
                "name": "time",
                "type": "DateTime",
                "fields": null,
                "items": null
              },
              {
                "name": "symbol",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "sector",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "securityType",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "bidPrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "bidSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "askPrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "askSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastUpdated",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSalePrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSaleSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSaleTime",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "volume",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "marketPercent",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "seq",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              }
            ]
          }
        }
      ]
    },
    {
      "name": "GroupBy",
      "type": "GroupBy",
      "inputNodes": [
        {
          "name": "ManageFields"
        }
      ],
      "properties": {
        "aggregations": [
          {
            "aggregateFunction": "Sum",
            "arguments": [],
            "column": {
              "expressionType": "ColumnReference",
              "node": null,
              "columnName": "volume",
              "columnPathSegments": []
            },
            "alias": "SUM_volume"
          },
          {
            "aggregateFunction": "Average",
            "arguments": [],
            "column": {
              "expressionType": "ColumnReference",
              "node": null,
              "columnName": "bidPrice",
              "columnPathSegments": []
            },
            "alias": "AVG_bidPrice"
          }
        ],
        "groupBy": [
          {
            "expressionType": "ColumnReference",
            "node": null,
            "columnName": "time",
            "columnPathSegments": []
          }
        ],
        "window": {
          "type": "Tumbling",
          "properties": {
            "duration": {
              "value": 20,
              "unit": "Second"
            },
            "offset": {
              "value": 5,
              "unit": "Second"
            }
          }
        }
      },
      "inputSchemas": [
        {
          "name": "ManageFields",
          "schema": {
            "columns": [
              {
                "name": "time",
                "type": "DateTime",
                "fields": null,
                "items": null
              },
              {
                "name": "symbol",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "sector",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "securityType",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "bidPrice",
                "type": "Float",
                "fields": null,
                "items": null
              },
              {
                "name": "bidSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "askPrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "askSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastUpdated",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSalePrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSaleSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSaleTime",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "volume",
                "type": "BigInt",
                "fields": null,
                "items": null
              },
              {
                "name": "marketPercent",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "seq",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              }
            ]
          }
        }
      ]
    },
    {
      "name": "ManageFields",
      "type": "ManageFields",
      "inputNodes": [
        {
          "name": "Filter"
        }
      ],
      "properties": {
        "columns": [
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "time",
                "columnPathSegments": []
              }
            },
            "alias": "time"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "symbol",
                "columnPathSegments": []
              }
            },
            "alias": "symbol"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "sector",
                "columnPathSegments": []
              }
            },
            "alias": "sector"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "securityType",
                "columnPathSegments": []
              }
            },
            "alias": "securityType"
          },
          {
            "type": "Cast",
            "properties": {
              "targetDataType": "Float",
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "bidPrice",
                "columnPathSegments": []
              }
            },
            "alias": "bidPrice"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "bidSize",
                "columnPathSegments": []
              }
            },
            "alias": "bidSize"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "askPrice",
                "columnPathSegments": []
              }
            },
            "alias": "askPrice"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "askSize",
                "columnPathSegments": []
              }
            },
            "alias": "askSize"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "lastUpdated",
                "columnPathSegments": []
              }
            },
            "alias": "lastUpdated"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "lastSalePrice",
                "columnPathSegments": []
              }
            },
            "alias": "lastSalePrice"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "lastSaleSize",
                "columnPathSegments": []
              }
            },
            "alias": "lastSaleSize"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "lastSaleTime",
                "columnPathSegments": []
              }
            },
            "alias": "lastSaleTime"
          },
          {
            "type": "Cast",
            "properties": {
              "targetDataType": "BigInt",
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "volume",
                "columnPathSegments": []
              }
            },
            "alias": "volume"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "marketPercent",
                "columnPathSegments": []
              }
            },
            "alias": "marketPercent"
          },
          {
            "type": "Rename",
            "properties": {
              "column": {
                "expressionType": "ColumnReference",
                "node": null,
                "columnName": "seq",
                "columnPathSegments": []
              }
            },
            "alias": "seq"
          }
        ]
      },
      "inputSchemas": [
        {
          "name": "Filter",
          "schema": {
            "columns": [
              {
                "name": "time",
                "type": "DateTime",
                "fields": null,
                "items": null
              },
              {
                "name": "symbol",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "sector",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "securityType",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "bidPrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "bidSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "askPrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "askSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastUpdated",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSalePrice",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSaleSize",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "lastSaleTime",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "volume",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "marketPercent",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              },
              {
                "name": "seq",
                "type": "Nvarchar(max)",
                "fields": null,
                "items": null
              }
            ]
          }
        }
      ]
    }
  ],
  "compatibilityLevel": "1.0"
}